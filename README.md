<img align="center" src="https://user-images.githubusercontent.com/71987862/148909945-0fa44cac-8ec8-4973-a55f-a4f683cc12cd.png" />

<br>

<p float="center" align="center" style="padding: 0; margin: 0;">
  <img align="center" style="margin: 0; padding: 0;" src="https://user-images.githubusercontent.com/71987862/148910073-6f157c1e-9dfe-4cea-aff1-0e7ae0029a08.png" width=49% />
  <img align="center" style="margin: 0; padding: 0;" src="https://user-images.githubusercontent.com/71987862/148920897-6168a9e3-2898-4c89-9457-b6ea829e91d0.png" width=49% />
</p>

<hr>

# Coronatime

<p>
This is a website for covid statistics. It has two main page, wordlwide, which shows combined statistics from all countries and second page, where you can see individual country statistics, this page provides some tools to search and filter countries based on statistics or country name.
    
Covid Statistics is updated every day, data comes from external [API](https://devtest.ge/api).
    
Frontend is built with [TailwindCSS](https://tailwindcss.com/) and on backend I used [Laravel](https://laravel.com/) with [Livewire](https://laravel-livewire.com/).<br />
User authentication, verification and password reset is built by hand, no starter kits were used.
    
You can change English and Georgian languages on the website, thank to [Spatie Laravel translatable](https://github.com/spatie/laravel-translatable).
*But keep in mind, when you first run app and seed database, data is generated by laravel faker and quotes aren't on Georgian, when you make them, only those quotes will be translatable.*

Website is bilingual, you can choose Georgian or English language.

</p>

<hr>

-   [Coronatime](#coronatime)
-   [Installation](#installation)
-   [Used Tools](#used-tools)
-   [Prerequisites](#prerequisites)
-   [Development](#development)
-   [Testing](#testing)
-   [Mailing](#mailing)
-   [Database](#database)
-   [Resources](#resources)

#

### Installation

```sh
git clone https://github.com/RedberryInternship/vakhtangchitauri-coronatime.git
```

```sh
composer install
```

```sh
npm install
```

## Used Tools

-   <img src="./public/images/readme/mailgun.png" height="18" style="position: relative; top: 4px" /> [Mailgun](https://www.mailgun.com/) - Mailing
-   <img src="./public/images/readme/mix.png" height="18" style="position: relative; top: 4px" /> [Laravel Mix](https://laravel-mix.com/) - Compiler
-   <img src="./public/images/readme/jwt.png" height="18" style="position: relative; top: 4px" /> [JWT Auth](https://jwt-auth.readthedocs.io/en/develop/) - Authentication
-   <img src="./public/images/readme/spatie.png" height="19" style="position: relative; top: 4px" /> [Spatie Translatable](https://github.com/spatie/laravel-translatable) - Translation

#

## Prerequisites

-   <img src="./public/images/readme/php.svg" width="35" style="position: relative; top: 4px" /> *PHP@7.3 and up*
-   <img src="./public/images/readme/sqlite.png" width="35" style="position: relative; top: 14px" /> *Sqlite@3.36 and up*
-   <img src="./public/images/readme/npm.png" width="35" style="position: relative; top: 4px" /> _npm@6 and up_
-   <img src="./public/images/readme/composer.png" width="35" style="position: relative; top: 6px" /> _composer@2 and up_

#

## Development

### After cloning the application you need to create your own environment.

**Run this scripts from the ROOT directory of the app.**

Create .env file

```sh
  cat .env.example > .env
```

Generate unique key.

```sh
  php artisan key:generate
```

Change database from mysql to sqlite

```sh
  sed -i 's/mysql/sqlite/' .env
```

Create sqlite file

```sh
  touch database/database.sqlite
```

Run migration

```sh
  php artisan migrate --seed
```

If you want to manually fetch covid statistics you can run this artisan command <br/>
_keep in mind it may take few minutes, if api does not return response, it repeats same steps with delayed time_.

```sh
  php artisan command:updateCovidStatistics
```

Run the application

```sh
  php artisan serve
```

## Testing

At this point application has 100% test coverage. One thing to notice, when running tests, costum command, which fetches covid statistics gets responses from Fake api, but sleep time between calls is still there, so if you don't want every time you run tests to wait few minutes you need to comment [this](https://github.com/RedberryInternship/vakhtangchitauri-coronatime/blob/43d9e52349442a0d95893ffdef971ac2a69c233e/app/Console/Commands/updateCovidStatistics.php#L67) and [this](https://github.com/RedberryInternship/vakhtangchitauri-coronatime/blob/43d9e52349442a0d95893ffdef971ac2a69c233e/app/Console/Commands/updateCovidStatistics.php#L76) lines.

## Mailing

For mailing app uses [mailgun](https://www.mailgun.com/) free plan, which has limits on number of people who can recieve emails, so when app is in development mode it would be better if you use [Mailtrap](https://mailtrap.io/) which is created for exactly this situation.

> Mailtrap is a default server in Laravel, so you need just to type in your credentials. You will find them in the SMTP Settings tab of your Inbox. Also, you can use Integrations data from the same tab. Choose Laravel from the list, copy the following details, and paste them to your .env file:

```
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=1a2b3c4d5e6f7g //your username
MAIL_PASSWORD=1a2b3c4d5e6f7g // your password
MAIL_FROM_ADDRESS=from@example.com
MAIL_FROM_NAME=Example
```

## Database

schema made with **https://drawsql.app/**

![image](https://user-images.githubusercontent.com/71987862/148931106-a3c60aca-ab23-4784-a6db-4791622475e5.png)

See diagram here https://drawsql.app/redberry-9/diagrams/random-movie

## Resources

[Figma Designs](<https://www.figma.com/file/79XxXXa99QiG5bvjah6cL8/Coronatime-(Copy)?node-id=0%3A1>)

[Drawsql](https://drawsql.app/)
